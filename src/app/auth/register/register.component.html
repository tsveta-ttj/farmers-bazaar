<div class="container mt-5">
  <form class="register" [formGroup]="registerFormGroup" (ngSubmit)="handleRegister()">
    <fieldset>
      <h2>Registration form</h2>

      <p *ngIf="errorMessage" class="error">{{errorMessage}}</p>

      <div class="form-group mb-3">
        <label for="email">Email address</label>
        <input formControlName="email" type="email" class="form-control" name="email" id="email"
          placeholder="Enter email">

        <ng-container
          *ngIf="registerFormGroup.controls['email'].touched && registerFormGroup.controls['email'].invalid">
          <p *ngIf="registerFormGroup.controls['email'].errors?.['required']" class="error">
            Email is required!
          </p>

          <p *ngIf="registerFormGroup.controls['email'].errors?.['email']" class="error">
            Email is not valid!
          </p>

        </ng-container>

      </div>

      <div class="form-group mb-3">
        <label for="username">Username</label>
        <input formControlName="username" type="text" class="form-control" name="username" id="username"
          placeholder="Enter username">


        <ng-container
          *ngIf="registerFormGroup.controls['username'].touched && registerFormGroup.controls['username'].invalid">
          <p *ngIf="registerFormGroup.controls['username'].errors?.['required']" class="error">
            Username is required!
          </p>
          
          <p *ngIf="registerFormGroup.controls['username'].errors?.['minlength']" class="error">
            Username must be at least 3 characters!
          </p>
          
        </ng-container>

      </div>

      <div formGroupName="passwords">
        <div class="form-group mb-3">
          <label for="password">Password</label>
          <input formControlName="password" type="password" class="form-control" name="password" id="password"
            placeholder="******">
        

        <ng-container *ngIf="passwordsGroup.controls['password'].touched && passwordsGroup.controls['password'].invalid" >
          <p *ngIf="passwordsGroup.controls['password'].errors?.['required']" class="error">
            Password is required!
          </p>
          
          <p *ngIf="passwordsGroup.controls['password'].errors?.['minlength']" class="error">
            Password must be at least 5 characters!
          </p>

        </ng-container>
      </div>

        <div class="form-group mb-3">
          <label for="repass">Repeat Password</label>
          <input formControlName="repass" type="password" class="form-control" name="repass" placeholder="******">

          <ng-container *ngIf="passwordsGroup.controls['repass'].touched && passwordsGroup.controls['repass'].invalid">
            <p *ngIf="passwordsGroup.controls['repass'].errors?.['passwordMatch']" class="error">Repeat Password does not match password!</p>

          </ng-container>
        </div>

      </div>
      <button [disabled]="registerFormGroup.invalid" type="submit" class="btn btn-primary">Create Account</button>

      <p class="text-center">
        Have an account?
        <a routerLink="/login">Log In</a>
    </p>
    </fieldset>
  </form>

</div>